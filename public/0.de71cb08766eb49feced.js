webpackJsonp([0],{767:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(10),u=n(c),s=a(770),d=n(s),f=a(771),m=n(f),b=a(772),p=n(b),h=a(84),w=n(h),v=a(301),g=n(v),y=a(773),N=n(y),E=a(17),k=(n(E),a(83)),S=a(48),_=a(170),x=n(_),C=(a(71),a(169)),M=function(e){function t(){var e,a,n,l;r(this,t);for(var i=arguments.length,c=Array(i),u=0;u<i;u++)c[u]=arguments[u];return a=n=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),n.decoded=x.default.decode(n.props.token,{complete:!0}),n.socket=(0,g.default)(),n.saveNavigation=function(){localStorage.setItem("dashboardNavigator",n.props.dashboardNavigator)},l=a,o(n,l)}return l(t,e),i(t,[{key:"componentWillUnmount",value:function(){this.socket.disconnect(),localStorage.setItem("dashboardNavigator",this.props.dashboardNavigator),window.removeEventListener("beforeunload",this.saveNavigation)}},{key:"componentWillMount",value:function(){var e=Number(localStorage.getItem("dashboardNavigator"));this.props.navigateDashboard(e)}},{key:"componentDidMount",value:function(){var e=this,t=void 0;try{t=this.decoded.payload.businessShortcode}catch(e){t=1}this.socket.on("new customer",function(t){e.props.setCustomersNumber(t.count)}),this.socket.on("new payment",function(t){e.props.setPaymentsNumber(t.count),e.props.setAccountBalance(t.accountBalance)}),this.socket.emit("details",{businessShortcode:t}),w.default.get("/api/count-customers?businessShortcode="+t).then(function(a){var n=a.data;"fail"===n.confirmation&&("failed"==n.auth&&e.props.merchantLogout(),console.log(n)),"success"===n.confirmation&&(e.props.setCustomersNumber(+n.count),w.default.get("/api/count-payments?businessShortcode="+t).then(function(a){var n=a.data;"fail"===n.confirmation&&("failed"===n.auth&&e.props.merchantLogout(),console.log(n)),"success"===n.confirmation&&(e.props.setPaymentsNumber(+n.count),w.default.get("/api/account-balance?businessShortcode="+t).then(function(t){var a=t.data;"fail"===a.confirmation&&("failed"==a.auth&&e.props.merchantLogout(),console.log(a)),"success"===a.confirmation&&e.props.setAccountBalance(a.accountBalance)}))}).catch(function(e){console.log(e)}))}).catch(function(e){console.log(e)}),window.addEventListener("beforeunload",this.saveNavigation)}},{key:"render",value:function(){var e=this.props,t=e.displaySidebar,a=e.navigateDashboard,n=e.closeSidebar,r=e.dashboardNavigator,o=void 0;try{o=this.decoded.payload.name}catch(e){o=null}return u.default.createElement("div",null,u.default.createElement(d.default,{merchantName:o}),u.default.createElement("br",null),u.default.createElement(m.default,{displaySidebar:t,navigateDashboard:a,dashboardNavigator:r,closeSidebar:n}),t&&u.default.createElement(p.default,{closeSidebar:n}),u.default.createElement(N.default,{dashboardNavigator:r}))}}]),t}(c.Component),O=function(e){return{token:e.merchant.token,displaySidebar:e.merchant.displaySidebar,dashboardNavigator:e.merchant.dashboardNavigator}},P=function(e){return(0,S.bindActionCreators)({navigateDashboard:C.navigateDashboard,closeSidebar:C.closeSidebar,setAccountBalance:C.setAccountBalance,setCustomersNumber:C.setCustomersNumber,setPaymentsNumber:C.setPaymentsNumber,merchantLogout:C.merchantLogout},e)};t.default=(0,k.connect)(O,P)(M)},770:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(10),o=n(r),l=a(17),i=n(l),c=a(83),u=a(48),s=a(169),d=function(e){var t=e.merchantName,a=e.merchantLogout,n=e.openSidebar;return o.default.createElement("div",{className:"w3-top w3-margin-bottom w3-black",style:{"z-index":4}},o.default.createElement("div",{className:"w3-bar w3-large w3-card-4"},o.default.createElement("button",{className:"w3-bar-item w3-button w3-hide-large w3-text-white w3-hover-none w3-hover-text-light-grey",onClick:n},o.default.createElement("i",{className:"fa fa-bars"}),"  Menu"),o.default.createElement("div",{className:"w3-dropdown-hover w3-right"},o.default.createElement("button",{className:"w3-button w3-text-white w3-hover-none w3-hover-text-light-grey"},t," ",o.default.createElement("i",{className:"fa fa-caret-down"})),o.default.createElement("div",{className:"w3-dropdown-content w3-bar-block w3-border",style:{right:0}},o.default.createElement("button",{className:"w3-bar-item w3-black w3-button w3-text-white w3-hover-black w3-hover-text-light-grey",onClick:a},"Log out ",o.default.createElement("i",{className:"w3-right fa fa-sign-out"}))))))};d.propTypes={merchantName:i.default.string.isRequired,merchantLogout:i.default.func.isRequired};var f=function(e){return(0,u.bindActionCreators)({merchantLogout:s.merchantLogout,openSidebar:s.openSidebar},e)};t.default=(0,c.connect)(null,f)(d)},771:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(10),o=n(r),l=(a(71),a(171)),i=n(l),c=a(17),u=n(c),s=function(e){var t=e.displaySidebar,a=e.dashboardNavigator,n=e.navigateDashboard,r=e.closeSidebar,l=t?{"z-index":3,width:"300px",display:"block"}:{"z-index":3,width:"300px"};return o.default.createElement("nav",{className:"w3-sidebar w3-collapse w3-white w3-animate-left",style:l,id:"mySidebar"},o.default.createElement("br",null),o.default.createElement("div",{className:"w3-container"},o.default.createElement("h5",null,"Dashboard")),o.default.createElement("div",{className:"w3-bar-block"},o.default.createElement("a",{href:"#",className:"w3-bar-item w3-button w3-padding-16 w3-hide-large w3-dark-grey w3-hover-black",title:"close menu",onClick:r},o.default.createElement("i",{className:"fa fa-remove fa-fw"}),"  Close Menu"),o.default.createElement("a",{href:"#",className:(0,i.default)("w3-bar-item w3-button w3-padding",{"primary-color":0===a,"w3-text-white":0===a}),onClick:function(){return n(0)}},o.default.createElement("i",{className:"fa fa-users fa-fw"}),"  Overview"),o.default.createElement("a",{href:"#",className:(0,i.default)("w3-bar-item w3-button w3-padding",{"primary-color":1===a,"w3-text-white":1===a}),onClick:function(){return n(1)}},o.default.createElement("i",{className:"fa fa-money fa-fw"}),"  Payments"),o.default.createElement("a",{to:"#",className:(0,i.default)("w3-bar-item w3-button w3-padding",{"primary-color":2===a,"w3-text-white":2===a}),onClick:function(){return n(2)}},o.default.createElement("i",{className:"fa fa-users fa-fw"}),"  Customers"),o.default.createElement("a",{href:"#",className:(0,i.default)("w3-bar-item w3-button w3-padding",{"primary-color":3===a,"w3-text-white":3===a})},o.default.createElement("i",{className:"fa fa-sitemap fa-fw"}),"  Merchant Profile"),o.default.createElement("a",{href:"#",className:(0,i.default)("w3-bar-item w3-button w3-padding",{"primary-color":4===a,"w3-text-white":4===a})},o.default.createElement("i",{className:"fa fa-file fa-fw"}),"  Reports"),o.default.createElement("a",{href:"#",className:(0,i.default)("w3-bar-item w3-button w3-padding",{"primary-color":5===a,"w3-text-white":5===a})},o.default.createElement("i",{className:"fa fa-shopping-cart fa-fw"}),"  Marketing")))};s.propTypes={displaySidebar:u.default.bool.isRequired,dashboardNavigator:u.default.number.isRequired,navigateDashboard:u.default.func.isRequired,closeSidebar:u.default.func.isRequired},t.default=s},772:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(10),o=n(r),l=a(17),i=n(l),c=function(e){var t=e.closeSidebar;return o.default.createElement("div",{className:"w3-overlay w3-hide-large w3-animate-opacity",style:{cursor:"pointer",display:"block"},title:"close side menu",id:"myOverlay",onClick:t})};c.propTypes={closeSidebar:i.default.func.isRequired},t.default=c},773:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(10),o=n(r),l=a(302),i=n(l),c=(a(71),a(17)),u=n(c),s=(0,i.default)(function(){return a.e(6).then(a.bind(null,774))}),d=(0,i.default)(function(){return a.e(5).then(a.bind(null,777))}),f=(0,i.default)(function(){return a.e(7).then(a.bind(null,781))}),m=function(e){var t=e.dashboardNavigator,a=void 0;switch(t){case 0:a=o.default.createElement(s,null);break;case 1:a=o.default.createElement(d,null);break;case 2:a=o.default.createElement(f,null)}return o.default.createElement("div",{className:"w3-main",style:{"margin-left":"300px","margin-top":"20px"}},a)};m.propTypes={dashboardNavigator:u.default.number.isRequired},t.default=m}});