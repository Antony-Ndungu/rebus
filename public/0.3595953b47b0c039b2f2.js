webpackJsonp([0],{763:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=a(10),i=r(c),s=a(766),d=r(s),f=a(767),m=r(f),b=a(768),p=r(b),h=a(84),w=r(h),v=a(301),y=r(v),g=a(769),N=r(g),E=a(17),k=(r(E),a(83)),_=a(48),S=a(170),x=r(S),C=(a(71),a(169)),M=function(e){function t(){var e,a,r,l;n(this,t);for(var u=arguments.length,c=Array(u),i=0;i<u;i++)c[i]=arguments[i];return a=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.decoded=x.default.decode(r.props.token,{complete:!0}),r.socket=(0,y.default)(),l=a,o(r,l)}return l(t,e),u(t,[{key:"componentWillUnmount",value:function(){this.socket.disconnect()}},{key:"componentDidMount",value:function(){var e=this,t=void 0;try{t=this.decoded.payload.businessShortcode}catch(e){t=1}this.socket.on("new customer",function(t){e.props.setCustomersNumber(t.count)}),this.socket.on("new payment",function(t){e.props.setPaymentsNumber(t.count),e.props.setAccountBalance(t.accountBalance)}),this.socket.emit("details",{businessShortcode:t}),w.default.get("/api/count/customers?businessShortcode="+t).then(function(a){var r=a.data;"fail"===r.confirmation&&("failed"==r.auth&&e.props.merchantLogout(),console.log(r)),"success"===r.confirmation&&(e.props.setCustomersNumber(+r.count),w.default.get("/api/count/payments?businessShortcode="+t).then(function(t){var a=t.data;"fail"===a.confirmation&&("failed"===a.auth&&e.props.merchantLogout(),console.log(a)),"success"===a.confirmation&&e.props.setPaymentsNumber(+a.count)}).catch(function(e){console.log(e)}))}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this.props,t=e.displaySidebar,a=e.navigateDashboard,r=e.closeSidebar,n=e.dashboardNavigator,o=void 0;try{o=this.decoded.payload.name}catch(e){o=null}return i.default.createElement("div",null,i.default.createElement(d.default,{merchantName:o}),i.default.createElement("br",null),i.default.createElement("br",null),i.default.createElement(m.default,{displaySidebar:t,navigateDashboard:a,dashboardNavigator:n,closeSidebar:r}),t&&i.default.createElement(p.default,{closeSidebar:r}),i.default.createElement(N.default,{dashboardNavigator:n}))}}]),t}(c.Component),O=function(e){return{token:e.merchant.token,displaySidebar:e.merchant.displaySidebar,dashboardNavigator:e.merchant.dashboardNavigator}},P=function(e){return(0,_.bindActionCreators)({navigateDashboard:C.navigateDashboard,closeSidebar:C.closeSidebar,setAccountBalance:C.setAccountBalance,setCustomersNumber:C.setCustomersNumber,setPaymentsNumber:C.setPaymentsNumber,merchantLogout:C.merchantLogout},e)};t.default=(0,k.connect)(O,P)(M)},766:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(10),o=r(n),l=a(17),u=r(l),c=a(83),i=a(48),s=a(169),d=function(e){var t=e.merchantName,a=e.merchantLogout,r=e.openSidebar;return o.default.createElement("div",{className:"w3-top w3-margin-bottom w3-black",style:{"z-index":4}},o.default.createElement("div",{className:"w3-bar w3-large w3-card-4"},o.default.createElement("button",{className:"w3-bar-item w3-button w3-hide-large w3-text-white w3-hover-none w3-hover-text-light-grey",onClick:r},o.default.createElement("i",{className:"fa fa-bars"}),"  Menu"),o.default.createElement("div",{className:"w3-dropdown-hover w3-right"},o.default.createElement("button",{className:"w3-button w3-text-white w3-hover-none w3-hover-text-light-grey"},t," ",o.default.createElement("i",{className:"fa fa-caret-down"})),o.default.createElement("div",{className:"w3-dropdown-content w3-bar-block w3-border",style:{right:0}},o.default.createElement("button",{className:"w3-bar-item w3-black w3-button w3-text-white w3-hover-black w3-hover-text-light-grey",onClick:a},"Log out ",o.default.createElement("i",{className:"w3-right fa fa-sign-out"}))))))};d.propTypes={merchantName:u.default.string.isRequired,merchantLogout:u.default.func.isRequired};var f=function(e){return(0,i.bindActionCreators)({merchantLogout:s.merchantLogout,openSidebar:s.openSidebar},e)};t.default=(0,c.connect)(null,f)(d)},767:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(10),o=r(n),l=(a(71),a(171)),u=r(l),c=a(17),i=r(c),s=function(e){var t=e.displaySidebar,a=e.dashboardNavigator,r=e.navigateDashboard,n=e.closeSidebar,l=t?{"z-index":3,width:"300px",display:"block"}:{"z-index":3,width:"300px"};return o.default.createElement("nav",{className:"w3-sidebar w3-collapse w3-white w3-animate-left",style:l,id:"mySidebar"},o.default.createElement("br",null),o.default.createElement("div",{className:"w3-container"},o.default.createElement("h5",null,"Dashboard")),o.default.createElement("div",{className:"w3-bar-block"},o.default.createElement("a",{href:"#",className:"w3-bar-item w3-button w3-padding-16 w3-hide-large w3-dark-grey w3-hover-black",title:"close menu",onClick:n},o.default.createElement("i",{className:"fa fa-remove fa-fw"}),"  Close Menu"),o.default.createElement("a",{href:"#",className:(0,u.default)("w3-bar-item w3-button w3-padding",{"primary-color":0===a,"w3-text-white":0===a}),onClick:function(){return r(0)}},o.default.createElement("i",{className:"fa fa-users fa-fw"}),"  Overview"),o.default.createElement("a",{href:"#",className:(0,u.default)("w3-bar-item w3-button w3-padding",{"primary-color":1===a,"w3-text-white":1===a}),onClick:function(){return r(1)}},o.default.createElement("i",{className:"fa fa-money fa-fw"}),"  Payments"),o.default.createElement("a",{to:"#",className:(0,u.default)("w3-bar-item w3-button w3-padding",{"primary-color":2===a,"w3-text-white":2===a}),onClick:function(){return r(2)}},o.default.createElement("i",{className:"fa fa-users fa-fw"}),"  Customers"),o.default.createElement("a",{href:"#",className:(0,u.default)("w3-bar-item w3-button w3-padding",{"primary-color":3===a,"w3-text-white":3===a})},o.default.createElement("i",{className:"fa fa-sitemap fa-fw"}),"  Merchant Profile"),o.default.createElement("a",{href:"#",className:(0,u.default)("w3-bar-item w3-button w3-padding",{"primary-color":4===a,"w3-text-white":4===a})},o.default.createElement("i",{className:"fa fa-file fa-fw"}),"  Reports"),o.default.createElement("a",{href:"#",className:(0,u.default)("w3-bar-item w3-button w3-padding",{"primary-color":5===a,"w3-text-white":5===a})},o.default.createElement("i",{className:"fa fa-shopping-cart fa-fw"}),"  Marketing")))};s.propTypes={displaySidebar:i.default.bool.isRequired,dashboardNavigator:i.default.number.isRequired,navigateDashboard:i.default.func.isRequired,closeSidebar:i.default.func.isRequired},t.default=s},768:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(10),o=r(n),l=a(17),u=r(l),c=function(e){var t=e.closeSidebar;return o.default.createElement("div",{className:"w3-overlay w3-hide-large w3-animate-opacity",style:{cursor:"pointer",display:"block"},title:"close side menu",id:"myOverlay",onClick:t})};c.propTypes={closeSidebar:u.default.func.isRequired},t.default=c},769:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(10),o=r(n),l=a(302),u=r(l),c=(a(71),a(17)),i=r(c),s=(0,u.default)(function(){return a.e(5).then(a.bind(null,770))}),d=(0,u.default)(function(){return a.e(6).then(a.bind(null,773))}),f=(0,u.default)(function(){return a.e(7).then(a.bind(null,774))}),m=function(e){var t=e.dashboardNavigator,a=void 0;switch(t){case 0:a=o.default.createElement(s,null);break;case 1:a=o.default.createElement(d,null);break;case 2:a=o.default.createElement(f,null)}return o.default.createElement("div",{className:"w3-main",style:{"margin-left":"300px","margin-top":"43px"}},a)};m.propTypes={dashboardNavigator:i.default.number.isRequired},t.default=m}});